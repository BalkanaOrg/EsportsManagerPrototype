<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:EsportsManager.ViewModels"
             x:Class="EsportsManager.Views.TeamProfileView"
             Title="{Binding Team.Name}">

    <ScrollView>
        <StackLayout Padding="10" Spacing="10">
            <!-- Team Info -->
            <Frame BackgroundColor="{StaticResource Secondary}">
                <StackLayout>
                    <Label Text="{Binding Team.Name}" 
                           FontSize="20" 
                           FontAttributes="Bold"/>
                    <Label Text="{Binding Team.WorldRanking, 
                           StringFormat='Rank: #{0}'}"/>
                    <Label Text="{Binding Team.Budget, 
                           StringFormat='Budget: ${0:N0}'}"/>
                </StackLayout>
            </Frame>

            <!-- Active Players -->
            <Label Text="Active Roster" 
                   FontSize="18" 
                   FontAttributes="Bold"/>
            <CollectionView ItemsSource="{Binding Team.Players}">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="5"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Image Grid.Column="0" 
                                       Source="{Binding Nationality, Converter={StaticResource NationalityToFlagConverter}}"
                                       WidthRequest="30" 
                                       HeightRequest="20"/>

                                <StackLayout Grid.Column="1">
                                    <Label Text="{Binding FullName}" 
                                           FontAttributes="Bold"/>
                                    <Label Text="{Binding Role}" 
                                           FontSize="14"/>
                                    <Label Text="{Binding Stats.Rating, 
                                           StringFormat='Rating: {0:F2}'}"/>
                                </StackLayout>

                                <Button Text="View"
                                Command="{Binding ViewPlayerCommand}"
                                CommandParameter="{Binding .}"/>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Bench Players -->
            <Label Text="Bench Players" 
                   FontSize="18" 
                   FontAttributes="Bold"/>
            <CollectionView ItemsSource="{Binding Team.Bench}">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="5"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <!-- Same template as active players -->
                        <Frame Padding="10">
                            <!-- ... same content as active players ... -->
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </StackLayout>
    </ScrollView>
</ContentPage>